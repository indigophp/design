var IndigoAdmin=function(){"use strict";function pageInit(base_url){console.log("Incorrectly inline styled elements: ",$("[style]:not(.menu-gravatar)")),$(".datatables").each(function(){var aoSearchCols=[],aoColumns=[],controls=[];if($(this).find(".filter:first").children("[data-filter]").each(function(index,el){var val,control=$(el).data("control")?$(el).data("control"):void 0,filter=$(el).data("filter");switch(filter){case"text":case"number":case"date":void 0===control&&(control="input:first");break;case"select":void 0===control&&(control="select:first");break;case"none":case!1:case"":case"null":case null:case void 0:var val=!1;control=!1,filter="none";break;case"range":void 0===control&&(control="input:nth-child(1), input:nth-child(2)"),val=[],$(el).find(control).each(function(index,el){val[index]=$(el).val()})}void 0===val&&(val=$(el).find(control).val()),controls[index]={control:control,filter:filter},aoColumns[index]={bSearchable:!$(el).hasClass("no-search"),bSortable:!$(el).hasClass("no-sort"),sFilter:$(el).data("filter")},aoSearchCols[index]=val?{sSearch:JSON.stringify(val)}:null,$.extend(aoColumns[index],$(el).data("options"))}),$(this).is("table"))var table=this;else var table=$(this).find("table:first").get();var dtInstance=$(table).dataTable({oLanguage:{sUrl:base_url+"translation/datatables.json"},sPaginationType:"bs_full",sDom:"<'panel-heading'<'pull-right'f><'pull-left'l><'pull-left'>r<'clearfix'>><'table-responsive't>p",bProcessing:$(this).data("source")?!0:!1,bServerSide:$(this).data("source")?!0:!1,sAjaxSource:$(this).data("source"),aoSearchCols:aoSearchCols,aoColumns:aoColumns.length>0?aoColumns:null,aaSorting:$(this).data("sorting")?$(this).data("sorting"):[],fnInitComplete:function(oSettings){var datatable=this,search_input=datatable.closest(".dataTables_wrapper").find("div[id$=_filter] input");search_input.attr("placeholder",oSettings&&oSettings.oLanguage&&oSettings.oLanguage.sSearchPlaceholder?oSettings.oLanguage.sSearchPlaceholder:"Search all fields"),search_input.addClass("form-control input-sm");var length_sel=datatable.closest(".dataTables_wrapper").find("div[id$=_length] select");length_sel.selectpicker({width:"auto"}).selectpicker("setStyle","btn-sm","add")},fnServerData:function(sSource,aoData,fnCallback,oSettings){$.each($(this).data(),function(index,val){aoData.push({name:index,value:val})}),$.each(oSettings.aoColumns,function(index,val){aoData.push({name:"sFilter_"+index,value:val.sFilter})}),$.ajax({dataType:"json",type:"POST",url:sSource,data:aoData,success:function(response,result,xhr){console.log(result),fnCallback(response,result,xhr)},timeout:15e3,error:function(param){console.log(param)}})}});dtInstance.find(".filter select").selectpicker();var filters=dtInstance.find(".filter");$.each(controls,function(index,el){if("none"!==el.filter){var c=filters.children("[data-filter]:nth-child("+(index+1)+")").find(el.control);switch(el.filter){case"text":case"number":case"date":c.change(function(){dtInstance.fnFilter(JSON.stringify($(this).val()),index)}).on("reset",function(){$(this).val("")}).on("keypress keyup paste change",function(){c.val($(this).val())});break;case"select":c.on("change",function(){dtInstance.fnFilter(JSON.stringify($(this).val()),index),c.val($(this).val()).selectpicker("refresh")}).on("reset",function(){$(this).val([]).selectpicker("refresh")});break;case"range":var odd=c.filter(":odd"),even=c.filter(":even");odd.change(function(){var val=[even.eq($(this).index()).val(),$(this).val()];dtInstance.fnFilter(JSON.stringify(val),index)}).on("keypress keyup paste change",function(){odd.val($(this).val())}),even.change(function(){var val=[$(this).val(),odd.eq($(this).index()).val()];dtInstance.fnFilter(JSON.stringify(val),index)}).on("keypress keyup paste change",function(){even.val($(this).val())}),c.on("reset",function(){$(this).val("")})}$(filters).find("[type=reset]").click(function(){c.trigger("reset")})}}),$(this).find("[type=reset]").click(function(){dtInstance.fnFilterClear()})}),$(".datetime").each(function(){$(this).datetimepicker({language:"hu-HU",icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down"}})}),$(".date").each(function(){$(this).datetimepicker({pickTime:!1,language:"hu-HU",icons:{date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down"}})}),$(".ckedit").each(function(){$(this).ckeditor({language:"hu-HU"}),CKEDITOR.on("instanceReady",function(){$(".cke_toolgroup:has(.cke_button__find, .cke_button__qrc, .cke_button__about), .cke_button__anchor, .cke_button__mathjax, .cke_button__cut, .cke_button__paste, .cke_button__copy, .cke_button__pastetext, .cke_button__pastefromword, .cke_button__pastefromword + .cke_toolbar_separator, .cke_button__table, .cke_button__horizontalrule, .cke_button__specialchar").addClass("hidden-xs")})}),$(".selectpicker").each(function(){$(this).selectpicker()});try{Unity.init({name:"Indigo Admin",iconUrl:"https://secure.gravatar.com/avatar/7f3930c2e3af0d6dcb0115e194111898?s=256&d=mm",onInit:setUpUnityIntegration})}catch(e){}console.log("IndigoAdmin pageInit() completed.")}function exposeMenu(prefix,menu){menu.find(" > li").each(function(){var anchor=$(this).find("> a"),button=$(this).find("> button");anchor.length?Unity.addAction(prefix+"/"+$.trim(anchor.text()),function(){anchor[0].click()}):exposeMenu(prefix+"/"+$.trim(button.text()),$(this).find(" > ul"))})}function setUpUnityIntegration(){exposeMenu("",$(".side-navigation .primary")),$(this).trigger("unityready")}function setMenuLabel(menuItemId,text,type){type="undefined"!=typeof type?type:"primary",$("#menu-item-"+menuItemId+" > .label").removeClass("label-danger").removeClass("label-info").removeClass("label-warning").removeClass("label-default").removeClass("label-primary").addClass("label-"+type).html(text)}function addFastButton(title,icon,callback){if(icon="undefined"!=typeof icon&&null!==icon&&""!==icon?'<span class="'+icon+'"></span>':"",title="undefined"!=typeof title&&null!==title&&""!==title?title:"",title+icon=="")return void console.error("You must supply at least one of title and icon.");if("string"==typeof callback)var elementHtml='<li><a href="'+callback+'">'+icon+(""!=title&&""!=icon?" &nbsp; ":"")+title+"</a></li>",element=$(elementHtml);else{var elementHtml='<li><a href="#">'+icon+(""!=title&&""!=icon?" &nbsp; ":"")+title+"</a></li>",element=$(elementHtml);element.find("a").click(function(){return callback(),!1})}element.prependTo("html body div.navbar div.hidden-xs ul.nav")}function addProxyButton(title,icon,selector){addFastButton(title,icon,function(){$(selector)[0].click()})}function displayNotification(title,body,icon){Unity.Notification.showNotification(title,body,icon)}try{var Unity=external.getUnityObject(1)}catch(e){}return{pageInit:pageInit,setMenuLabel:setMenuLabel,addFastButton:addFastButton,addProxyButton:addProxyButton,displayNotification:displayNotification}}();